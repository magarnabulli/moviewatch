@page "/"
@inject IMovieWatchService Service

<PageTitle>MovieWatch</PageTitle>

<h1>M O V I E  W A T C H</h1>
<div class="d-flex align-content-end flex-wrap">
	@foreach (var item in Films)
	{

		<div class="card me-4 mb-4 rounded-0" style="width: 18rem;">
			<img src="@item.ImgUrl" class="card-img-top rounded-0" alt="@item.ImgUrl">
			<div class="card-body">
				<h5 class="card-title">@item.Title</h5>
				<p class="card-text">@item.Description?.Truncate(50)</p>
				<a href="films/@item.Id" class="btn btn-primary">Watch movie</a>
			</div>
		</div>
	}

</div>
@code {
	public int Id { get; set; }
	public List<FilmDto> Films { get; set; } = new();
	public List<GenreDto> Genres { get; set; } = new();
	public List<DirectorDto> Directors { get; set; } = new();
	private long maxFileSize = 1024 * 1024 * 3;
	string FileName { get; set; } = null!;
	protected override async Task OnInitializedAsync()
	{
		Films = await Service.ReadFilmsAsync(false);
		Genres = await Service.ReadGenresAsync();
		Directors = await Service.ReadDirectorsAsync();
	}

}
